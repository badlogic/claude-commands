# Todo Implementation System

Human-agent collaborative workflow for transforming vague todos into implemented features in ~150 LOC of Markdown.

This workflow is meant for engineers who want to stay in control of and informed about their code base, using agents to do the tedious work, and their brain for the hard parts.

**Problems this solves**:
- Breaking vague ideas into well defined problem descriptions and concrete implementation steps
- Preventing agents from making unauthorized changes or expanding scope
- Efficient context usage by providing agents only task-relevant information
- Full isolation of feature work using git worktrees
- Resuming interrupted work without losing context or progress
- Traceable feature development history with meaningful commits and pull request

**Problems this does not solve**:
- "Claude, build me Uber for dogs"
- Slop in your code base generated by an army of unsupervised agents in the cloud
- Merge conflicts

**Why this approach**:
- Zero dependencies, pure markdown + git + shell commands
- Easy to understand, modify, and transfer between any coding agent
- No vendor lock-in, maximum transparency and simplicity

## How it works
Just read [`todo.md`](./todo.md). It's 150 LOC of Markdown. You can do it!

At its core, the workflow is a state machine that guides the agent through distinct phases:
- **`INIT`**: Describes the project and checks for leftover work.
- **`SELECT`**: The human chooses a task from `todos/todos.md`.
- **`REFINE`**: The agent and human collaborate to create a detailed implementation plan.
- **`IMPLEMENT`**: The agent executes the plan, with the human approving each step.
- **`COMMIT`**: The work is finalized into a clean pull request.

See also [prompt-as-program](https://mariozechner.at/posts/2025-06-02-prompts-are-code/) workflow.

## Installation

### Claude Code
1. Put `todo.md` in `~/.claude/commands` (global) or `project/.claude/commands` (project)
    - If you put it in your project, ensure you commit it before starting work on any todos
2. In your project: `mkdir -p todos && echo "- add dark mode" > todos/todos.md`

### Other agents
1. Put `todo.md` in a location accessible to your agent
2. In your project: `mkdir -p todos && echo "- add dark mode" > todos/todos.md`

## Usage
The core idea is to load `todo.md` as a system prompt or initial instruction for your agent. The agent will then run the workflow defined in the prompt and guide you through it.

### Claude Code
In your project root directory
```bash
# The --dangerously-skip-permissions flag allows the agent to execute
# shell commands (git, cd, mkdir) as defined in the workflow without
# user approval. Omitting it will require you to manually approve
# every shell command.
claude --dangerously-skip-permissions "/todo"
```

Claude will guide you through the workflow.

### Other agents
1. Run your agent in your project root directory
2. Give the contents of `todo.md` to the agent as the first user message

The agent will guide you through the workflow.

## Caveats
LLMs occasionally ignore their programming when tasks get complex. Keep your tasks small and focused for best results.

Much of this could be proper code instead of prompt. But then it wouldn't be as portable or easy to tweak. Your agent can help convert `todo.md` to a real program if you prefer, calling into an agent for steps that require (interactive) inference steps.

Multiple humans editing `todos/todos.md` simultaneously creates perfect race conditions. In team projects, coordinate who's working on what so you don't end up with duplicate PRs for the same feature. Replacing `todos/todos.md` with one GitHub issue per vague todo is not a solution by the way. Think it through.

The worktree isolation lets you run agents in parallel, even across machines. But orphaned task detection only works if all agents run on the same machine. Distributed task management would need a central server, which defeats the simplicity. Left as an exercise for distributed systems enthusiasts and their silicon assistants.

Git worktrees create actual filesystem directories. If you have many concurrent tasks, you might hit filesystem limits or confuse tools that scan directories. Clean up completed worktrees periodically, manually.